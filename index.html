<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mystery Babylon | OODA WIKI</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --background-color: #000000;
            --accent-color: #00FF00;
            --muted-color: #555555;
            --dark-red: #800000;
            --light-gray: #B0B0B0;
        }
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
            background-color: var(--background-color); /* Black background for entire page */
        }
        body {
            display: flex;
            flex-direction: column;
        }
        #header {
            display: flex;
            align-items: center;
            min-height: 80px; /* Fixed height to ensure black fills top */
            padding: 0; /* Remove padding to eliminate gaps */
            background-color: var(--background-color); /* Ensure black background */
        }
        #logo {
            display: block;
            max-width: 25%; /* Slightly larger to fit toggle */
            height: auto;
            margin: 0 10px; /* Add some spacing */
        }
        @media (max-width: 768px) {
            #logo {
                max-width: 50%; /* Larger on mobile to balance toggle */
                overflow: hidden;
            }
            #header {
                min-height: 60px; /* Adjust for mobile */
            }
        }
        #black-box {
            flex-grow: 1;
            background-color: var(--background-color);
            height: 100%;
            min-height: inherit;
        }
        #audio-toggle {
            position: relative;
            margin-left: auto; /* Push to right */
            padding: 5px 10px;
            cursor: pointer;
            font-size: 1.5em; /* Slightly smaller to fit */
            font-weight: bold;
            color: #FFFFFF;
            transition: color 0.2s ease-in-out;
            user-select: none;
        }
        #audio-toggle:hover {
            color: #CCCCCC;
        }
        #audio-toggle.playing {
            color: var(--accent-color);
        }
        #main-content {
            flex: 1;
            background-color: white;
            position: relative;
            overflow: hidden;
        }
        #background-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        #particles-fg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
        }
    </style>
</head>
<body>
    <div id="header">
        <img id="logo" src="OODA Mystery.png" alt="OODA Mystery Logo">
        <div id="black-box"></div>
        <div id="audio-toggle" title="Toggle Audio">â™ª</div>
    </div>
    <div id="background-layer"></div>
    <div id="main-content">
        <div id="particles-fg"></div>
    </div>
    
    <audio id="mysteryAudio" src="mystery_audio.mp3" loop></audio>
    
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Background cloud-like particles
        particlesJS("background-layer", {
            "particles": {
                "number": { "value": 50, "density": { "enable": true, "value_area": 800 } },
                "color": { "value": "#B0B0B0" },
                "shape": { "type": "image", "image": { "src": "clouds.png", "width": 100, "height": 100 } },
                "opacity": { "value": 0.2, "random": true },
                "size": { "value": 50, "random": true },
                "move": { "enable": true, "speed": 0.5, "direction": "top", "random": false, "straight": true, "out_mode": "out" }
            },
            "interactivity": {
                "events": { "onhover": { "enable": false }, "onclick": { "enable": false } }
            }
        });
        
        // Foreground interactive particles with lines
        particlesJS("particles-fg", {
            "particles": {
                "number": { "value": 120, "density": { "enable": true, "value_area": 800 } },
                "color": { "value": "#800000" },
                "shape": { "type": "circle" },
                "opacity": { "value": 1, "random": false },
                "size": { "value": 3, "random": true },
                "move": { "enable": true, "speed": 1, "direction": "none", "random": true, "straight": false, "out_mode": "out" },
                "line_linked": {
                    "enable": true,
                    "distance": 150,
                    "color": "#800000",
                    "opacity": 0.6,
                    "width": 1
                }
            },
            "interactivity": {
                "events": { "onhover": { "enable": true, "mode": "repulse" }, "onclick": { "enable": true, "mode": "push" } },
                "modes": { "repulse": { "distance": 150, "duration": 0.4 }, "push": { "particles_nb": 4 } }
            }
        });
        
        // Click counter for mailto trigger
        const canvas = document.querySelector('#particles-fg canvas');
        let clickCount = 0;
        canvas.addEventListener('click', () => {
            clickCount++;
            if (clickCount >= 12) {
                window.location.href = "mailto:admin@ooda.wiki?subject=Request%20to%20Do%20(Mystery%20Babylon)&body=I%20have%20made%20the%20decision%20to%20do%20something.%0A%0AI%20am%20ready%20for%20my%20first%20Saga.";
                clickCount = 0;
            }
        });
        
        // Audio control
        const audio = document.getElementById('mysteryAudio');
        const audioControl = document.getElementById('audio-toggle');
        let hasInteracted = false;
        
        function initialPlay() {
            if (!hasInteracted) {
                hasInteracted = true;
                audio.play().then(() => { audioControl.classList.add('playing'); })
                    .catch(error => { console.log('Autoplay prevented by browser.'); });
            }
        }
        
        function toggleAudio() {
            if (!hasInteracted) { initialPlay(); return; }
            if (audio.paused) {
                audio.play();
                audioControl.classList.add('playing');
            } else {
                audio.pause();
                audioControl.classList.remove('playing');
            }
        }
        
        canvas.addEventListener('click', initialPlay, { once: true });
        audioControl.addEventListener('click', toggleAudio);
    </script>
</body>
</html>
